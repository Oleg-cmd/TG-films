(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{8434:function(e,t,n){Promise.resolve().then(n.bind(n,2186))},2186:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a,i,r=n(7437),s=n(9066),l=n(2167),o=n(2853);let c=e=>({id:e,cards:[]});var d=n(7915),u=n(2265),g=n(1396),p=n.n(g),h=n(1936),m=n(3301),f=n(740),x=n.n(f);let{fontFamily:b}=n(4244),v={content:["./pages/**/*.{js,ts,jsx,tsx,mdx}","./components/**/*.{js,ts,jsx,tsx,mdx}","./app/**/*.{js,ts,jsx,tsx,mdx}"],theme:{extend:{colors:{background:"var(--background)",foreground:"var(--foreground)",answerBad:{500:"#F75064"},answerGood:{500:"#82D350"},grey:{500:"#6A6A6A"},blue:{500:"#051B71"},green:{300:"#D3E0BE",800:"#5c7537",900:"#34441c"},gameSwipe:{left:"#fcbab6",neutral:"#fafafa",right:"#D4E0B2"}},fontFamily:{sans:[...b.sans],acuminBold:["Acumin-Bold",...b.sans],acuminMedium:["Acumin-Medium",...b.sans],acuminLight:["Acumin-Light",...b.sans]},boxShadow:{card:"0 0px 15px -2px rgb(0 0 0 / 0.2), 0 0 3px -2px rgb(0 0 0 / 0.1)"},backgroundImage:{"gradient-radial":"radial-gradient(var(--tw-gradient-stops))","gradient-conic":"conic-gradient(from 180deg at 50% 50%, var(--tw-gradient-stops))"}}},plugins:[]},{theme:y}=x()(v),w=null==y?void 0:y.colors,j=[.16,1,.3,1];var C=n(6691),S=n.n(C),N=n(5070),E=n(609),O=n(1502),I=n(7168),k=n(7057),B=n(9366),D=e=>{let{id:t,data:n,setCardDrivenProps:a,setIsDragging:i,isDragging:s,isLast:l,setIsDragOffBoundary:c,direction:d,setDirection:g}=e,[p,h]=(0,u.useState)(!1),[m,f]=(0,u.useState)(!1),x=(0,E.c)(0),b=(0,N.ac)("(max-width: 768px)"),v=[-150,0,150],y=[w.gameSwipe.left,w.gameSwipe.neutral,w.gameSwipe.right],j=(0,O.H)(x,v,[-200,0,200]),C=(0,O.H)(x,v,[50,0,50]),D=(0,O.H)(x,v,[-40,0,40]),L=(0,O.H)(x,v,[3,1,.3]),M=(0,O.H)(x,v,[.3,1,3]),P=(0,O.H)(x,[-20,0,20],y);(0,I.W)(x,"change",e=>{a(t=>({...t,cardWrapperX:e,buttonScaleBadAnswer:L,buttonScaleGoodAnswer:M,mainBgColor:P}))});let A=e=>{e.stopPropagation(),f(!m)};return(0,u.useEffect)(()=>{B.c.inviteCode&&t&&B.c.sendMessage({type:"swipe",inviteCode:B.c.inviteCode,payload:{telegramId:"user123",movieId:n.id,swipe:d}})},[d]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.E.div,{id:"cardDrivenWrapper-".concat(t),className:"absolute bg-white rounded-lg text-center w-full aspect-[100/150] text-black origin-bottom shadow-card select-none",style:{y:C,rotate:D,x:j},children:(0,r.jsxs)(o.E.div,{className:"relative w-full h-full transition-transform duration-500",style:{transformStyle:"preserve-3d"},animate:{rotateY:m?180:0},transition:{duration:.05},onClick:e=>{s||A(e)},children:[(0,r.jsxs)(o.E.div,{className:"absolute w-full h-full backface-hidden rounded-lg",children:[(0,r.jsx)(S(),{priority:!0,fill:!0,src:n.poster,alt:n.title,className:"w-full object-cover rounded-lg",onLoadingComplete:e=>h(!0)}),(0,r.jsxs)("div",{className:"absolute w-full bottom-0 right-0  bg-black bg-opacity-50 text-white p-4 rounded-lg",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:n.title}),(0,r.jsxs)("p",{className:"text-lg",children:[n.year," | ",n.genre]}),(0,r.jsxs)("p",{className:"text-lg",children:["Rating: ",n.rating.toFixed(1),"/10"]})]}),(0,r.jsx)("button",{onClick:A,className:"absolute top-2 right-2 bg-white rounded-full p-2 shadow pointer-events-auto",children:(0,r.jsx)(k.Z,{className:"w-6 h-6 text-blue-600"})})]}),(0,r.jsxs)(o.E.div,{className:"absolute w-full top-0 right-0 h-full backface-hidden rotate-y-180 bg-white p-6 overflow-y-auto rounded-lg",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:n.title}),(0,r.jsx)("p",{className:"text-lg mb-4",children:n.description}),(0,r.jsx)("button",{onClick:A,className:"absolute top-2 right-2 bg-blue-600 text-white rounded-full p-2 shadow",style:{zIndex:999},children:(0,r.jsx)(k.Z,{className:"w-6 h-6"})})]})]})}),(0,r.jsx)(o.E.div,{id:"cardDriverWrapper-".concat(t),className:"absolute top-[50px] w-full aspect-[110/150] ".concat(s?"":"hover:cursor-grab"),drag:"x",dragSnapToOrigin:!0,dragElastic:b?.2:.06,dragConstraints:{left:0,right:0},dragTransition:{bounceStiffness:1e3,bounceDamping:50},onDragStart:()=>i(!0),onDrag:(e,t)=>{let n=t.offset.x;n<0&&n<-150?c("left"):n>0&&n>150?c("right"):c(null)},onDragEnd:(e,t)=>{i(!1),c(null);let n=t.offset.x>150||t.offset.x<-150,a=t.offset.x>0?"right":"left";n&&g(a)},style:{x}})]})},L=n(952),M=["title","titleId"];function P(){return(P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}var A=["title","titleId"];function G(){return(G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}let R={left:{ariaLabel:"Swipe Left",bgColorClass:"bg-answerBad-500",icon:function(e){var t=e.title,n=e.titleId,i=function(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(t.includes(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,M);return L.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 26 24","aria-labelledby":n},i),t?L.createElement("title",{id:n},t):null,a||(a=L.createElement("path",{d:"M22.667 6.8a1.326 1.326 0 0 0 0-1.875l-1.983-1.983a1.325 1.325 0 0 0-1.874 0l-4.873 4.873a1.326 1.326 0 0 1-1.874 0L7.19 2.942a1.326 1.326 0 0 0-1.875 0L3.333 4.925a1.326 1.326 0 0 0 0 1.875l4.872 4.872a1.326 1.326 0 0 1 0 1.875L3.333 18.42a1.326 1.326 0 0 0 0 1.874l1.982 1.983a1.326 1.326 0 0 0 1.875 0l4.873-4.873a1.325 1.325 0 0 1 1.874 0l4.873 4.873a1.325 1.325 0 0 0 1.875 0l1.982-1.983a1.326 1.326 0 0 0 0-1.874l-4.872-4.873a1.325 1.325 0 0 1 0-1.875z"})))},iconBaseColorClass:"text-[#701823]"},right:{ariaLabel:"Swipe Right",bgColorClass:"bg-answerGood-500",icon:function(e){var t=e.title,n=e.titleId,a=function(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(t.includes(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,A);return L.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 26 24","aria-labelledby":n},a),t?L.createElement("title",{id:n},t):null,i||(i=L.createElement("path",{d:"M9.17 21.662a1.326 1.326 0 0 1-1.875 0L.937 15.305a1.326 1.326 0 0 1 0-1.875l1.876-1.875a1.326 1.326 0 0 1 1.876.001l2.605 2.613c.518.52 1.358.52 1.877.001L20.39 2.938a1.326 1.326 0 0 1 1.875 0l1.877 1.876a1.326 1.326 0 0 1 0 1.875z"})))},iconBaseColorClass:"text-[#2C5B10]"}};var W=e=>{let{scale:t,direction:n,isDragOffBoundary:a=null,onClick:i}=e,s=R[n].icon;return(0,r.jsx)(o.E.button,{onClick:i,whileTap:{scale:.9},children:(0,r.jsx)(o.E.div,{className:"flex items-center justify-center w-[60px] h-[60px] rounded-full ".concat(R[n].bgColorClass," shadow"),style:{scale:t},children:(0,r.jsx)(s,{className:"w-[24px] h-[24px] duration-100 ease-out ".concat(null!=a&&a===n?"text-white":R[n].iconBaseColorClass)})})})};let z={cardWrapperX:0,buttonScaleBadAnswer:1,buttonScaleGoodAnswer:1,mainBgColor:w.gameSwipe.neutral};var H=()=>{let[e,t]=(0,d.useGameContext)(),[n,a]=(0,u.useState)(!1),{cards:i}=e,[s,c]=(0,u.useState)(""),[g,f]=(0,u.useState)(null),[x,b]=(0,u.useState)(z),[v,y]=(0,u.useState)(!1);(0,u.useEffect)(()=>{B.c.inviteCode&&(B.c.stompClient.subscribe("/topic/rooms/".concat(B.c.inviteCode,"/ready"),e=>{B.c.setReadyCount(JSON.parse(e.body))}),B.c.stompClient.subscribe("/topic/rooms/".concat(B.c.inviteCode,"/start"),()=>{a(!0)}))},[B.c.inviteCode]);let w=e=>{c(e)};(0,u.useEffect)(()=>{["left","right"].includes(s)&&t({...e,cards:e.cards.slice(0,-1)}),c("")},[s]);let C={current:{opacity:1,y:0,scale:1,transition:{duration:.3,ease:j}},upcoming:{opacity:.5,y:67,scale:.9,transition:{duration:.3,ease:j,delay:0}},remainings:{opacity:0,y:20,scale:.9},exit:{opacity:0,x:"left"===s?-300:300,y:40,rotate:"left"===s?-20:20,transition:{duration:.3,ease:j}}};return(0,r.jsxs)(o.E.div,{className:"flex p-5 min-h-screen h-full flex-col justify-center items-center overflow-hidden  ".concat(v?"cursor-grabbing":""),style:{backgroundColor:x.mainBgColor},children:[(0,r.jsx)(m.b,{}),(0,r.jsx)(p(),{href:"/",id:"close",className:"absolute top-[20px] right-[20px] w-[30px] h-auto",children:(0,r.jsx)(h.Z,{className:"text-gray-500 w-full h-full"})}),(0,r.jsxs)("div",{id:"gameUIWrapper",className:"flex flex-col gap-6 w-full items-center justify-center relative z-10",children:[(0,r.jsx)("div",{id:"cardsWrapper",className:"w-full aspect-[100/150] max-w-xs mb-[20px] relative z-10",children:(0,r.jsx)(l.M,{children:i.map((e,t)=>{let n=t===i.length-1,a=t===i.length-2;return(0,r.jsx)(o.E.div,{id:"card-".concat(e.id),className:"relative ",variants:C,initial:"remainings",animate:n?"current":a?"upcoming":"remainings",exit:"exit",children:(0,r.jsx)(D,{data:e,id:e.id,setCardDrivenProps:b,setIsDragging:y,isDragging:v,isLast:n,setIsDragOffBoundary:f,direction:s,setDirection:c})},"card-".concat(t))})})}),(0,r.jsxs)("div",{id:"actions",className:"flex items-center justify-center w-full  gap-4 relative z-10",children:[(0,r.jsx)(W,{direction:"left",ariaLabel:"swipe left",scale:x.buttonScaleBadAnswer,isDragOffBoundary:g,onClick:()=>w("left")}),(0,r.jsx)(W,{direction:"right",ariaLabel:"swipe right",scale:x.buttonScaleGoodAnswer,isDragOffBoundary:g,onClick:()=>w("right")})]})]})]})},Y=()=>(0,r.jsxs)(o.E.div,{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,r.jsx)(o.E.div,{className:"text-6xl font-bold text-white",initial:{scale:.5,rotate:-10},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20},children:"Its a Match!"}),(0,r.jsx)(o.E.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:2},children:[...Array(50)].map((e,t)=>(0,r.jsx)(o.E.div,{className:"absolute w-2 h-2 bg-yellow-400 rounded-full",initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,scale:0},animate:{y:[null,-(Math.random()*window.innerHeight)],scale:[0,1,0]},transition:{duration:2*Math.random()+1,repeat:1/0,repeatType:"loop"}},t))})]}),_=()=>{let[e,t]=(0,d.useGameContext)(),n=c(0);(0,u.useEffect)(()=>{t(n)},[]);let a=0===e.cards.length,i={initial:{opacity:0},animate:{opacity:1,transition:{duration:2,ease:(0,s._)(.16,1,.3,1)}},exit:{opacity:0,transition:{duration:.2,ease:(0,s._)(.7,0,.84,0)}}};return(0,r.jsx)("main",{className:"min-h-screen h-full mx-auto bg-gameSwipe-neutral",children:(0,r.jsx)(l.M,{mode:"wait",children:a?(0,r.jsx)(o.E.div,{id:"gameCompletion",variants:i,initial:"initial",animate:"animate",exit:"exit",children:(0,r.jsx)(Y,{})},"gameScreen2"):(0,r.jsx)(o.E.div,{id:"gameScreen",variants:i,initial:"initial",animate:"animate",exit:"exit",children:(0,r.jsx)(H,{})},"gameScreen1")})})}},3301:function(e,t,n){"use strict";n.d(t,{b:function(){return u}});var a=n(7437),i=n(2265),r=n(4949),s=n(6061),l=n(7042),o=n(3986);window.innerWidth;let c=(0,s.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:n,variant:i,size:s,asChild:d=!1,...u}=e,g=d?r.g7:"button";return(0,a.jsx)(g,{className:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.m)((0,l.W)(t))}(c({variant:i,size:s,className:n})),ref:t,...u})});d.displayName="Button";var u=()=>(0,a.jsx)("div",{className:"absolute inset-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:"url('/images/svg/topography.svg')",backgroundSize:"400px"}})},7915:function(e,t,n){"use strict";n.r(t),n.d(t,{useGameContext:function(){return l}});var a=n(7437),i=n(2265);let r=e=>(0,i.useState)(e),s=(0,i.createContext)(null);t.default=e=>{let{game:t,children:n}=e,[i,l]=r(t);return(0,a.jsx)(s.Provider,{value:[i,l],children:n})};let l=()=>{let e=(0,i.useContext)(s);if(!e)throw Error("useUserContext must be used within a UserProvider");return e}},9366:function(e,t,n){"use strict";n.d(t,{c:function(){return s}});var a=n(4256),i=n(8136);let r=(e,t,n)=>{let a=new WebSocket("wss://localhost:8080/ws"),r=i.over(a);return r.connect(function(){e(r)},e=>{t(e)},e=>{n(e)}),r},s=new class{setInviteCode(e){this.inviteCode=e}getDestination(e,t){return"connect"===t?"/app/connect":"join"===t?"/app/rooms/".concat(e,"/join"):"settings"===t?"/app/rooms/".concat(e,"/settings"):"ready"===t?"/app/rooms/".concat(e,"/ready"):"swipe"===t?"/app/rooms/".concat(e,"/swipe"):""}setStartYear(e){this.startYear=e,this.isReady=!1}setEndYear(e){this.endYear=e,this.isReady=!1}setRating(e){this.rating=e,this.isReady=!1}setIsReady(e){this.isReady=e}setReadyCount(e){this.readyCount=e}constructor(){this.selectedGenres=["Drama"],this.startYear=1990,this.endYear=new Date().getFullYear(),this.rating=5,this.isReady=!1,this.readyCount=void 0,this.inviteCode=null,this.stompClient=null,this.telegramId=null,this.connect=()=>{let e=new URLSearchParams(window.location.search),t=e.get("inviteCode")||null;this.telegramId=e.get("telegramId")||"user123",this.stompClient=r(e=>{e.subscribe("/topic/connect",e=>{try{let t=JSON.parse(e.body);t.inviteCode&&this.setInviteCode(t.inviteCode)}catch(e){console.log("no code in this message")}}),t&&this.sendMessage({type:"join",telegramId:this.telegramId,inviteCode:t})},e=>{console.error("Error connecting to STOMP:",e)},e=>{console.error("Error on connecting: ",e)})},this.sendMessage=e=>{if(this.stompClient&&this.stompClient.connected){let t;let n=this.getDestination(e.inviteCode,e.type);"connect"===e.type?(t=e.telegramId,this.stompClient.send(n,{},t)):"join"===e.type?(t=e.telegramId,this.stompClient.send(n,{},t)):"settings"===e.type?(t=JSON.stringify(e.settings),this.stompClient.send(n,{},t)):"ready"===e.type?(t=e.telegramId,this.stompClient.send(n,{},t)):"swipe"===e.type&&(t=JSON.stringify(e.payload),this.stompClient.send(n,{},t)),console.log("Sent: "+JSON.stringify(e))}else console.log("Socket is not connected.")},this.toggleGenre=e=>{this.selectedGenres=this.selectedGenres.includes(e)?this.selectedGenres.filter(t=>t!==e):[...this.selectedGenres,e],this.isReady=!1},(0,a.ky)(this)}}}},function(e){e.O(0,[147,922,119,222,971,864,744],function(){return e(e.s=8434)}),_N_E=e.O()}]);