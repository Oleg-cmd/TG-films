(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{8434:function(e,t,a){Promise.resolve().then(a.bind(a,1982))},1982:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return F}});var i,n,l=a(7437),r=a(9066),s=a(2167),o=a(2853),c=a(2265),d=a(1396),u=a.n(d),x=a(1936),m=a(3301),g=a(740),p=a.n(g);let{fontFamily:f}=a(4244),h={content:["./pages/**/*.{js,ts,jsx,tsx,mdx}","./components/**/*.{js,ts,jsx,tsx,mdx}","./app/**/*.{js,ts,jsx,tsx,mdx}"],theme:{extend:{colors:{background:"var(--background)",foreground:"var(--foreground)",answerBad:{500:"#F75064"},answerGood:{500:"#82D350"},grey:{500:"#6A6A6A"},blue:{500:"#051B71"},green:{300:"#D3E0BE",800:"#5c7537",900:"#34441c"},gameSwipe:{left:"#fcbab6",neutral:"#fafafa",right:"#D4E0B2"}},fontFamily:{sans:[...f.sans],acuminBold:["Acumin-Bold",...f.sans],acuminMedium:["Acumin-Medium",...f.sans],acuminLight:["Acumin-Light",...f.sans]},boxShadow:{card:"0 0px 15px -2px rgb(0 0 0 / 0.2), 0 0 3px -2px rgb(0 0 0 / 0.1)"},backgroundImage:{"gradient-radial":"radial-gradient(var(--tw-gradient-stops))","gradient-conic":"conic-gradient(from 180deg at 50% 50%, var(--tw-gradient-stops))"}}},plugins:[]},{theme:b}=p()(h),w=null==b?void 0:b.colors,y=[.16,1,.3,1];var v=a(6691),j=a.n(v),N=a(5070),E=a(609),C=a(1502),S=a(7168),k=a(7057),B=e=>{let{id:t,data:a,setCardDrivenProps:i,setIsDragging:n,isDragging:r,setIsDragOffBoundary:s,setDirection:d}=e,[u,x]=(0,c.useState)(!1),m=(0,E.c)(0),g=(0,N.ac)("(max-width: 768px)"),p=[-150,0,150],f=[w.gameSwipe.left,w.gameSwipe.neutral,w.gameSwipe.right],h=(0,C.H)(m,p,[-200,0,200]),b=(0,C.H)(m,p,[50,0,50]),y=(0,C.H)(m,p,[-40,0,40]),v=(0,C.H)(m,p,[3,1,.3]),B=(0,C.H)(m,p,[.3,1,3]),O=(0,C.H)(m,[-20,0,20],f);(0,S.W)(m,"change",e=>{i(t=>({...t,cardWrapperX:e,buttonScaleBadAnswer:v,buttonScaleGoodAnswer:B,mainBgColor:O}))});let A=e=>{e.stopPropagation(),x(!u)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.E.div,{id:"cardDrivenWrapper-".concat(t),className:"absolute bg-white p-1 rounded-lg text-center w-full aspect-[110/150] pointer-events-none text-black origin-bottom shadow-card select-none",style:{y:b,rotate:y,x:h},children:(0,l.jsxs)(o.E.div,{className:"relative w-full h-full transition-transform duration-500",style:{transformStyle:"preserve-3d"},animate:{rotateY:u?180:0},transition:{duration:.05},onClick:e=>{r||A(e)},children:[(0,l.jsxs)(o.E.div,{className:"absolute w-full h-full backface-hidden rounded-lg",children:[(0,l.jsx)(j(),{priority:!0,fill:!0,src:a.poster,alt:a.title,className:"w-full object-cover rounded-lg"}),(0,l.jsxs)("div",{className:"absolute w-full bottom-0 right-0  bg-black bg-opacity-50 text-white p-4 rounded-lg",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold",children:a.title}),(0,l.jsxs)("p",{className:"text-lg",children:[a.year," |"," ",Array.isArray(a.genre)?a.genre.join(", "):a.genre]}),(0,l.jsxs)("p",{className:"text-lg",children:["Rating: ",a.rating?a.rating.toFixed(1):"N/A","/10"]})]}),(0,l.jsx)("button",{onClick:A,className:"absolute top-2 right-2 bg-white rounded-full p-2 shadow pointer-events-auto",children:(0,l.jsx)(k.Z,{className:"w-6 h-6 text-blue-600"})})]}),(0,l.jsxs)(o.E.div,{className:"absolute w-full top-0 right-0 h-full backface-hidden rotate-y-180 bg-white p-6 overflow-y-auto rounded-lg",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:a.title}),(0,l.jsx)("p",{className:"text-lg mb-4",children:a.description}),(0,l.jsx)("button",{onClick:A,className:"absolute top-2 left-2 bg-blue-600 text-white rounded-full p-2 shadow",style:{zIndex:999},children:(0,l.jsx)(k.Z,{className:"w-6 h-6"})})]})]})}),(0,l.jsx)(o.E.div,{id:"cardDriverWrapper-".concat(t),className:"absolute top-[50px] w-full aspect-[110/150] ".concat(r?"":"hover:cursor-grab"),drag:"x",dragSnapToOrigin:!0,dragElastic:g?.2:.06,dragConstraints:{left:0,right:0},dragTransition:{bounceStiffness:1e3,bounceDamping:50},onDragStart:()=>n(!0),onDrag:(e,t)=>{let a=t.offset.x;a<0&&a<-150?s("left"):a>0&&a>150?s("right"):s(null)},onDragEnd:(e,t)=>{n(!1),s(null);let a=t.offset.x>150||t.offset.x<-150,i=t.offset.x>0?"right":"left";a&&d(i)},style:{x:m}})]})},O=a(952),A=["title","titleId"];function M(){return(M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(null,arguments)}var D=["title","titleId"];function I(){return(I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(null,arguments)}let P={left:{ariaLabel:"Swipe Left",bgColorClass:"bg-answerBad-500",icon:function(e){var t=e.title,a=e.titleId,n=function(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(t.includes(i))continue;a[i]=e[i]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)a=l[i],t.includes(a)||({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,A);return O.createElement("svg",M({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 26 24","aria-labelledby":a},n),t?O.createElement("title",{id:a},t):null,i||(i=O.createElement("path",{d:"M22.667 6.8a1.326 1.326 0 0 0 0-1.875l-1.983-1.983a1.325 1.325 0 0 0-1.874 0l-4.873 4.873a1.326 1.326 0 0 1-1.874 0L7.19 2.942a1.326 1.326 0 0 0-1.875 0L3.333 4.925a1.326 1.326 0 0 0 0 1.875l4.872 4.872a1.326 1.326 0 0 1 0 1.875L3.333 18.42a1.326 1.326 0 0 0 0 1.874l1.982 1.983a1.326 1.326 0 0 0 1.875 0l4.873-4.873a1.325 1.325 0 0 1 1.874 0l4.873 4.873a1.325 1.325 0 0 0 1.875 0l1.982-1.983a1.326 1.326 0 0 0 0-1.874l-4.872-4.873a1.325 1.325 0 0 1 0-1.875z"})))},iconBaseColorClass:"text-[#701823]"},right:{ariaLabel:"Swipe Right",bgColorClass:"bg-answerGood-500",icon:function(e){var t=e.title,a=e.titleId,i=function(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(t.includes(i))continue;a[i]=e[i]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)a=l[i],t.includes(a)||({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,D);return O.createElement("svg",I({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 26 24","aria-labelledby":a},i),t?O.createElement("title",{id:a},t):null,n||(n=O.createElement("path",{d:"M9.17 21.662a1.326 1.326 0 0 1-1.875 0L.937 15.305a1.326 1.326 0 0 1 0-1.875l1.876-1.875a1.326 1.326 0 0 1 1.876.001l2.605 2.613c.518.52 1.358.52 1.877.001L20.39 2.938a1.326 1.326 0 0 1 1.875 0l1.877 1.876a1.326 1.326 0 0 1 0 1.875z"})))},iconBaseColorClass:"text-[#2C5B10]"}};var L=e=>{let{scale:t,direction:a,isDragOffBoundary:i=null,onClick:n}=e,r=P[a].icon;return(0,l.jsx)(o.E.button,{onClick:n,whileTap:{scale:.9},children:(0,l.jsx)(o.E.div,{className:"flex items-center justify-center w-[60px] h-[60px] rounded-full ".concat(P[a].bgColorClass," shadow"),style:{scale:t},children:(0,l.jsx)(r,{className:"w-[24px] h-[24px] duration-100 ease-out ".concat(null!=i&&i===a?"text-white":P[a].iconBaseColorClass)})})})},z=a(6440),H=a(1100);let W={cardWrapperX:0,buttonScaleBadAnswer:1,buttonScaleGoodAnswer:1,mainBgColor:w.gameSwipe.neutral},_=(0,H.Pi)(()=>{let[e,t]=(0,c.useState)(""),[a,i]=(0,c.useState)(null),[n,r]=(0,c.useState)(W),[d,g]=(0,c.useState)(!1),p=z.c.cards,f=(e,t)=>{let a="right"===e?"like":"dislike";console.log(a),z.c.sendMessage({type:"swipe",inviteCode:z.c.inviteCode,payload:{telegramId:z.c.telegramId,movieId:t.id,swipe:a}})},h=e=>{t(e),p.length>0?(console.log("calling"),f(e,p[0])):console.log("0 length")};(0,c.useEffect)(()=>{["left","right"].includes(e)&&z.c.popCard(),t("")},[e]);let b={current:{opacity:1,y:0,scale:1,transition:{duration:.3,ease:y}},upcoming:{opacity:.5,y:67,scale:.9,transition:{duration:.3,ease:y,delay:0}},remainings:{opacity:0,y:20,scale:.9},exit:{opacity:0,x:"left"===e?-300:300,y:40,rotate:"left"===e?-20:20,transition:{duration:.3,ease:y}}};return(0,l.jsxs)(o.E.div,{className:"flex p-5 min-h-screen h-full flex-col justify-center items-center overflow-hidden  ".concat(d?"cursor-grabbing":""),style:{backgroundColor:n.mainBgColor},children:[(0,l.jsx)(m.b,{}),(0,l.jsx)(u(),{href:"/",id:"close",className:"absolute top-[20px] right-[20px] w-[30px] h-auto",children:(0,l.jsx)(x.Z,{className:"text-gray-500 w-full h-full"})}),(0,l.jsxs)("div",{id:"gameUIWrapper",className:"flex flex-col gap-6 w-full items-center justify-center relative z-10",children:[(0,l.jsx)("div",{id:"cardsWrapper",className:"w-full aspect-[100/150] max-w-xs mb-[20px] relative z-10",children:(0,l.jsx)(s.M,{children:p.map((e,a)=>{let n=a===p.length-1,s=a===p.length-2;return(0,l.jsx)("div",{children:(0,l.jsx)(o.E.div,{id:"card-".concat(e.id),className:"relative ",variants:b,initial:"remainings",animate:n?"current":s?"upcoming":"remainings",exit:"exit",children:(0,l.jsx)(B,{data:{...e,genre:Array.isArray(e.genre)?e.genre.map(e=>e.name).join(", "):e.genre},id:e.id,setCardDrivenProps:r,setIsDragging:g,isDragging:d,setIsDragOffBoundary:i,setDirection:t,onSwipe:f})})},"card-".concat(e.id))})})}),(0,l.jsxs)("div",{id:"actions",className:"flex items-center justify-center w-full  gap-4 relative z-10",children:[(0,l.jsx)(L,{direction:"left",ariaLabel:"swipe left",scale:n.buttonScaleBadAnswer,isDragOffBoundary:a,onClick:()=>h("left")}),(0,l.jsx)(L,{direction:"right",ariaLabel:"swipe right",scale:n.buttonScaleGoodAnswer,isDragOffBoundary:a,onClick:()=>h("right")})]})]})]})}),G=(0,H.Pi)(()=>{let e=z.c.matchedMovie;return(0,l.jsxs)(o.E.div,{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,l.jsx)(u(),{href:"/",id:"close",className:"absolute top-[20px] right-[20px] w-[30px] h-auto cursor-pointer z-50",children:(0,l.jsx)(x.Z,{className:"text-white w-full h-full"})}),(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,l.jsx)(o.E.div,{className:"text-3xl text-center font-bold text-white",initial:{scale:.5,rotate:-10},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20},children:"Its a Match!"}),e&&(0,l.jsxs)("div",{className:"mt-8 flex flex-col justify-center items-center",children:[(0,l.jsx)("div",{className:"text-white font-bold text-4xl",children:e.title}),(0,l.jsx)("div",{className:"text-white font-bold text-2xl",children:e.releaseYear})]})]}),(0,l.jsx)(o.E.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:2},children:[...Array(50)].map((e,t)=>(0,l.jsx)(o.E.div,{className:"absolute w-2 h-2 bg-yellow-400 rounded-full",initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,scale:0},animate:{y:[null,-(Math.random()*window.innerHeight)],scale:[0,1,0]},transition:{duration:2*Math.random()+1,repeat:1/0,repeatType:"loop"}},t))})]})}),T=(0,H.Pi)(()=>(0,l.jsxs)(o.E.div,{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,l.jsx)(u(),{href:"/",id:"close",className:"absolute top-[20px] right-[20px] w-[30px] h-auto cursor-pointer z-50",children:(0,l.jsx)(x.Z,{className:"text-white w-full h-full"})}),(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,l.jsx)(o.E.div,{className:"text-3xl text-center font-bold text-white",initial:{scale:.5,rotate:-10},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20},children:"You didnt pick a movie, most liked film:"}),z.c.cards.length>0&&(0,l.jsxs)("div",{className:"mt-8 flex flex-col justify-center items-center",children:[(0,l.jsx)("div",{className:"text-white font-bold text-4xl",children:z.c.cards[0].title}),(0,l.jsx)("div",{className:"text-white font-bold text-2xl",children:z.c.cards[0].year})]})]}),(0,l.jsx)(o.E.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:2},children:[...Array(50)].map((e,t)=>(0,l.jsx)(o.E.div,{className:"absolute w-2 h-2 bg-yellow-400 rounded-full",initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,scale:0},animate:{y:[null,-(Math.random()*window.innerHeight)],scale:[0,1,0]},transition:{duration:2*Math.random()+1,repeat:1/0,repeatType:"loop"}},t))})]})),Z=(0,H.Pi)(()=>{let e=0===z.c.cards.length,t={initial:{opacity:0},animate:{opacity:1,transition:{duration:2,ease:(0,r._)(.16,1,.3,1)}},exit:{opacity:0,transition:{duration:.2,ease:(0,r._)(.7,0,.84,0)}}};return(0,l.jsx)("main",{className:"min-h-screen h-full mx-auto bg-gameSwipe-neutral",children:(0,l.jsx)(s.M,{mode:"wait",children:"match"===z.c.matchStatus?(0,l.jsx)(o.E.div,{id:"gameCompletion",variants:t,initial:"initial",animate:"animate",exit:"exit",children:(0,l.jsx)(G,{})},"gameScreen2"):e?(0,l.jsx)(o.E.div,{id:"gameCompletion",variants:t,initial:"initial",animate:"animate",exit:"exit",children:(0,l.jsx)(T,{})},"gameScreen3"):(0,l.jsx)(o.E.div,{id:"gameScreen",variants:t,initial:"initial",animate:"animate",exit:"exit",children:(0,l.jsx)(_,{})},"gameScreen1")})})});var F=Z}},function(e){e.O(0,[147,922,596,222,171,971,864,744],function(){return e(e.s=8434)}),_N_E=e.O()}]);